<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DSE ICT 倒數 | 4.24</title>
    <!-- Use Precompiled Tailwind CSS instead of the heavy JS runtime for better mobile performance -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+TC:wght@400;700&display=swap');
      
      body {
        font-family: 'Inter', 'Noto Sans TC', sans-serif;
        background-color: #020617;
        color: #f8fafc;
        margin: 0;
        overflow-x: hidden;
      }

      .glass {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .glass-card {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%);
      }

      .petal {
        position: absolute;
        background-color: #ffb7c5;
        border-radius: 150% 0 150% 0;
        opacity: 0.2;
        pointer-events: none;
        z-index: 1;
        animation: fall linear infinite;
        will-change: transform;
      }

      @keyframes fall {
        0% { transform: translate(0, -10%) rotate(0deg); opacity: 0; }
        10% { opacity: 0.3; }
        90% { opacity: 0.3; }
        100% { transform: translate(80px, 110vh) rotate(360deg); opacity: 0; }
      }

      .text-glow {
        text-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
      }

      .pulse-soft {
        animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(0.98); }
      }

      /* Mobile Specific Optimizations */
      @media (max-width: 640px) {
        .countdown-grid { gap: 0.5rem; }
        .countdown-val { font-size: 2.25rem !important; }
        .countdown-box { width: 4.5rem !important; height: 5.5rem !important; border-radius: 1rem !important; }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="module">
      // Switch to Preact for massive size reduction (faster mobile loading)
      import { h, render } from 'https://esm.sh/preact';
      import { useState, useEffect, useMemo } from 'https://esm.sh/preact/hooks';
      import htm from 'https://esm.sh/htm';

      const html = htm.bind(h);

      const MOTIVATIONAL_QUOTES = [
        { quote: "人生就像一段優質的代碼，邏輯清晰，終能運行出完美的結果。", author: "ICT 守護者" },
        { quote: "每一次複習都是一次數據同步，讓你的大腦庫存更加充實。", author: "系統分析師" },
        { quote: "面對困難要像面對 Bug 一樣冷靜，逐一排查，終會解決。", author: "資深開發者" },
        { quote: "你的潛力如同無限的雲端空間，只要願意開發，便無窮無盡。", author: "網絡架構師" },
        { quote: "成功沒有快捷鍵，唯有腳踏實地，按部就班。", author: "ICT 導師" },
        { quote: "學習就像深度學習模型，需要大量的輸入與訓練，才能產出智慧。", author: "AI 研究員" },
        { quote: "不要在意暫時的失敗，那只是程序的 Exception，捕捉並處理它就好。", author: "代碼工程師" },
        { quote: "編寫屬於你的未來，每一行代碼都代表著你的汗水與智慧。", author: "ICT 守護者" },
        { quote: "目標要像固定的 IP 地址，無論路徑如何變化，始終清晰可見。", author: "網絡專家" },
        { quote: "勤奮是硬件，方法是軟件，兩者結合才能發揮最大效能。", author: "電腦科學家" },
        { quote: "生活中的每一個細節，都值得像處理關鍵代碼一樣去雕琢。", author: "品質保證員" },
        { quote: "保持好奇心，它是驅動你探索科技世界的原始動力。", author: "創新極客" },
        { quote: "複習的過程就像代碼重構，讓知識體系更簡潔、更強大。", author: "軟體架構師" },
        { quote: "堅持就是最好的算法，它能幫你解決人生中最複雜的難題。", author: "算法大師" },
        { quote: "你當下的付出，正在為未來的成功進行預編譯。", author: "編譯器專家" },
        { quote: "夢想是內核，努力是外殼，唯有內外兼修，才能穩定運行。", author: "系統專家" },
        { quote: "把壓力轉化為動力，就像處理器將電能轉化為算力。", author: "硬件工程師" },
        { quote: "自信是你的密鑰，它能開啟通往成功的加密門扉。", author: "資訊安全官" },
        { quote: "讓每一天的進步都成為一個 commit，記錄你成長的軌跡。", author: "Git 管理員" },
        { quote: "四月二十四，是你期待已久的 Release Date，準備好迎接綻放吧。", author: "ICT 守護者" }
      ];

      const getTargetDate = () => {
        const now = new Date();
        const currentYear = now.getFullYear();
        let target = new Date(currentYear, 3, 24); 
        if (now > target) target = new Date(currentYear + 1, 3, 24);
        return target;
      };

      const calculateTimeLeft = (target) => {
        const diff = target - new Date();
        if (diff <= 0) return { days: 0, hours: 0, minutes: 0, seconds: 0, isComplete: true };
        return {
          days: Math.floor(diff / 864e5),
          hours: Math.floor((diff / 36e5) % 24),
          minutes: Math.floor((diff / 6e4) % 60),
          seconds: Math.floor((diff / 1e3) % 60),
          isComplete: false,
        };
      };

      const Petals = () => {
        const petals = useMemo(() => Array.from({ length: 8 }).map((_, i) => ({
          id: i,
          left: Math.random() * 100 + '%',
          size: (Math.random() * 8 + 8) + 'px',
          duration: (Math.random() * 12 + 8) + 's',
          delay: (Math.random() * 5) + 's'
        })), []);

        return html`
          <div className="absolute inset-0 overflow-hidden pointer-events-none z-0">
            ${petals.map(p => html`
              <div 
                key=${p.id}
                className="petal"
                style=${{
                  left: p.left,
                  width: p.size,
                  height: p.size,
                  animationDuration: p.duration,
                  animationDelay: p.delay
                }}
              />
            `)}
          </div>
        `;
      };

      const CountdownCard = ({ value, label }) => html`
        <div className="flex flex-col items-center">
          <div className="countdown-box glass-card glass w-20 h-24 md:w-32 md:h-40 rounded-2xl flex items-center justify-center mb-2 md:mb-4">
            <span className="countdown-val text-3xl md:text-6xl font-black text-white text-glow">
              ${value.toString().padStart(2, '0')}
            </span>
          </div>
          <span className="text-[8px] md:text-[10px] uppercase tracking-widest text-indigo-300/60 font-bold">
            ${label}
          </span>
        </div>
      `;

      const App = () => {
        const targetDate = useMemo(() => getTargetDate(), []);
        const [timeLeft, setTimeLeft] = useState(() => calculateTimeLeft(targetDate));
        const [quoteIdx, setQuoteIdx] = useState(() => Math.floor(Math.random() * MOTIVATIONAL_QUOTES.length));

        useEffect(() => {
          const timer = setInterval(() => setTimeLeft(calculateTimeLeft(targetDate)), 1000);
          return () => clearInterval(timer);
        }, [targetDate]);

        const progress = Math.max(0, 100 - (timeLeft.days / 365) * 100);
        const insight = MOTIVATIONAL_QUOTES[quoteIdx];

        return html`
          <div className="min-h-screen flex flex-col items-center justify-center p-4 relative bg-[#020617] text-slate-200 overflow-hidden">
            <${Petals} />
            
            <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-indigo-900/10 to-transparent pointer-events-none"></div>
            
            <main className="z-10 w-full max-w-4xl flex flex-col items-center">
              <header className="text-center mb-10 md:mb-16">
                <div className="inline-block px-4 py-1 rounded-full glass text-[9px] font-bold tracking-[0.3em] text-indigo-300 mb-6 uppercase border border-indigo-500/10">
                  DSE ICT Countdown
                </div>
                <h1 className="text-5xl md:text-8xl font-black mb-4 tracking-tighter text-glow">04.24</h1>
                <p className="text-indigo-200/40 text-[10px] md:text-sm font-bold tracking-widest uppercase pulse-soft">
                  ${timeLeft.isComplete ? '考試日到了！' : '距離 ICT 考試還剩'}
                </p>
              </header>

              <div className="countdown-grid flex justify-center gap-3 md:gap-8 mb-12">
                <${CountdownCard} value=${timeLeft.days} label="Days" />
                <${CountdownCard} value=${timeLeft.hours} label="Hours" />
                <${CountdownCard} value=${timeLeft.minutes} label="Mins" />
                <${CountdownCard} value=${timeLeft.seconds} label="Secs" />
              </div>

              ${!timeLeft.isComplete && html`
                <div className="w-full max-w-xl px-4 mb-10">
                  <div className="w-full h-1 bg-white/5 rounded-full overflow-hidden">
                    <div className="h-full bg-indigo-500 transition-all duration-1000" style=${{ width: `${progress}%` }}></div>
                  </div>
                  <div className="flex justify-between mt-2 text-[8px] font-bold uppercase tracking-widest text-indigo-400/40">
                    <span>Preparation</span>
                    <span>${progress.toFixed(1)}%</span>
                  </div>
                </div>
              `}

              <div className="glass glass-card p-6 md:p-10 rounded-3xl max-w-lg w-full relative group">
                <button 
                  onClick=${() => setQuoteIdx((quoteIdx + 1) % MOTIVATIONAL_QUOTES.length)}
                  className="absolute top-4 right-4 text-indigo-400/30 hover:text-indigo-300 transition-colors"
                >
                  <i className="fas fa-redo-alt text-xs"></i>
                </button>
                <div className="flex gap-4">
                  <i className="fas fa-quote-left text-indigo-500/20 text-xl"></i>
                  <div>
                    <p className="text-base md:text-lg font-medium text-indigo-50 md:leading-relaxed mb-3">
                      "${insight.quote}"
                    </p>
                    <p className="text-[10px] text-indigo-400/60 font-bold tracking-widest">— ${insight.author}</p>
                  </div>
                </div>
              </div>

              <footer className="mt-16 opacity-20 text-[8px] font-bold uppercase tracking-[0.4em]">
                Focused • Precise • Efficient
              </footer>
            </main>
          </div>
        `;
      };

      render(html`<${App} />`, document.getElementById('root'));
    </script>
  </body>
</html>
